import { notFound } from 'next/navigation';
import { PostViewer } from '@/app/components/PostViewer';
import { getPost } from '@/app/lib/api';
import { Post } from '@/app/types/post.types';

// 샘플 데이터 (개발용)
const MOCK_DATA: Record<string, Record<string, Post>> = {
  'affection_jh': {
    '170':{
        "id": 170,
        "title": "애한제야",
        "thumbnailImageUrl": "https://dy6yjbdvo0pg9.cloudfront.net/users/affection_jh/videos/ab816dde-98e0-49a3-8afa-60640ce7f3db.mp4",
        "content": {
            "nodes": [
                {
                    "id": "0c2d9cf4-e05f-4f43-944f-b8de2eba6619",
                    "text": "애한제야",
                    "type": "paragraph",
                    "spans": [],
                    "isTitle": true
                },
                {
                    "id": "img_1762144798537347",
                    "data": {
                        "url": "https://dy6yjbdvo0pg9.cloudfront.net/users/affection_jh/902b7ec0-28dd-4dfc-bdd2-b79b6d64af8e.jpg",
                        "mediaId": 1185,
                        "spoiler": true,
                        "hasComments": false,
                        "commentCount": 0
                    },
                    "type": "image"
                },
                {
                    "id": "imageRow_1762317163039",
                    "type": "imageRow",
                    "urls": [
                        "https://dy6yjbdvo0pg9.cloudfront.net/users/affection_jh/90087e73-b47d-4e7d-848d-31878c8804c9.jpg",
                        "https://dy6yjbdvo0pg9.cloudfront.net/users/affection_jh/79ed9b88-4a3d-4605-9f62-e90e43e0e0f5.jpg"
                    ],
                    "spacing": 8.0
                },
                {
                    "id": "1",
                    "text": "애한제를 이렇게 한적이 있었나",
                    "type": "paragraph",
                    "spans": [
                        {
                            "end": 5,
                            "attrs": {
                                "font_size": 28.0
                            },
                            "start": 0
                        }
                    ]
                },
                {
                    "id": "62127a33-ec6a-413c-8b83-4d4af71ec27a",
                    "text": "축제 이야기 시작할게요",
                    "type": "paragraph",
                    "spans": [
                        {
                            "end": 2,
                            "attrs": {
                                "spoiler": true,
                                "highlight": "#FFFFCC80"
                            },
                            "start": 0
                        },
                        {
                            "end": 12,
                            "attrs": {
                                "spoiler": true
                            },
                            "start": 2
                        }
                    ]
                },
                {
                    "id": "05e5a665-576b-4694-8c7e-dfe316a248b2",
                    "text": "",
                    "type": "paragraph",
                    "spans": []
                },
                {
                    "id": "clip_1762027344491",
                    "data": {
                        "url": "https://dy6yjbdvo0pg9.cloudfront.net/users/affection_jh/videos/8957bbf7-6efd-4a42-891f-2c5fc98c639c.mp4",
                        "hasComments": false,
                        "commentCount": 0
                    },
                    "type": "video"
                },
                {
                    "id": "92b4cc74-e5ec-408e-91d9-9ea66966217d",
                    "text": "미야오나이스",
                    "type": "paragraph",
                    "spans": []
                },
                {
                    "id": "01f3c959-f921-4d6c-b6fc-69f165513e5b",
                    "text": "",
                    "type": "paragraph",
                    "spans": []
                },
                {
                    "id": "clip_1762027254050",
                    "data": {
                        "url": "https://dy6yjbdvo0pg9.cloudfront.net/users/affection_jh/videos/e0bc215b-b8cf-4dcd-938d-e3e5a4f34211.mp4",
                        "hasComments": false,
                        "commentCount": 0
                    },
                    "type": "video"
                },
                {
                    "id": "clip_1762027108332",
                    "data": {
                        "url": "https://dy6yjbdvo0pg9.cloudfront.net/users/affection_jh/videos/074ca54e-e878-4602-b19f-75a873ba064d.mp4",
                        "hasComments": false,
                        "commentCount": 0
                    },
                    "type": "video"
                },
                {
                    "id": "p_1762027467545",
                    "text": "캬",
                    "type": "paragraph",
                    "spans": []
                },
                {
                    "id": "clip_1762027149598",
                    "data": {
                        "url": "https://dy6yjbdvo0pg9.cloudfront.net/users/affection_jh/videos/957bb335-2e94-467a-ad33-788a00e1ffd0.mp4",
                        "hasComments": false,
                        "commentCount": 0
                    },
                    "type": "video"
                },
                {
                    "id": "p_1762027474651",
                    "text": "우즈",
                    "type": "paragraph",
                    "spans": []
                },
                {
                    "id": "d6b21849-c134-4e70-a160-8866a49b5259",
                    "text": "",
                    "type": "paragraph",
                    "spans": []
                },
                {
                    "id": "clip_1762027213300",
                    "data": {
                        "url": "https://dy6yjbdvo0pg9.cloudfront.net/users/affection_jh/videos/8720247e-dab6-4d35-b821-fdfc6c057ef3.mp4",
                        "hasComments": false,
                        "commentCount": 0
                    },
                    "type": "video"
                },
                {
                    "id": "fb54c33b-0678-435d-8956-669a0a1f5ebc",
                    "text": "헤잊",
                    "type": "paragraph",
                    "spans": []
                },
                {
                    "id": "961a3769-379c-4637-a936-3835b5ba3ce1",
                    "text": "",
                    "type": "paragraph",
                    "spans": []
                },
                {
                    "id": "clip_1762027300094",
                    "data": {
                        "url": "https://dy6yjbdvo0pg9.cloudfront.net/users/affection_jh/videos/63e31483-46f8-424a-9f3a-7f69cb0e1407.mp4",
                        "hasComments": false,
                        "commentCount": 0
                    },
                    "type": "video"
                },
                {
                    "id": "p_1762027487613",
                    "text": "가리워진 길",
                    "type": "paragraph",
                    "spans": []
                },
                {
                    "id": "p_mention_1762112460423_0",
                    "type": "mention",
                    "usernames": [
                        "testuser1"
                    ]
                },
                {
                    "id": "e440c95c-6030-4119-9a35-25c199df43fc",
                    "text": "",
                    "type": "paragraph",
                    "spans": []
                },
                {
                    "id": "95bd802f-aeff-43f9-a703-eb3f55b774a0",
                    "text": "",
                    "type": "paragraph",
                    "spans": []
                },
                {
                    "id": "3b248121-754c-4a71-bb12-5f3928317d8e",
                    "text": "",
                    "type": "paragraph",
                    "spans": []
                },
                {
                    "id": "9887a9d3-21e7-47e2-91c0-a5034c799c04",
                    "text": "",
                    "type": "paragraph",
                    "spans": []
                },
                {
                    "id": "c46f688b-f2d9-469d-856c-e8b666e1d259",
                    "text": "",
                    "type": "paragraph",
                    "spans": []
                },
                {
                    "id": "80f57ab5-06d9-4660-995f-71a703a73fd3",
                    "text": "",
                    "type": "paragraph",
                    "spans": []
                }
            ],
            "stickers": [
                {
                    "id": "stk_1762112484640",
                    "type": "drawing",
                    "scale": 1.0,
                    "anchor": {
                        "refW": 393.0,
                        "localX": 107.16665649414062,
                        "localY": 924.3333282470704,
                        "nodeId": "clip_1762027300094"
                    },
                    "zIndex": 3,
                    "content": {
                        "strokes": [
                            {
                                "color": "#FF4D96FF",
                                "erase": false,
                                "width": 8.0,
                                "points": [
                                    {
                                        "x": 141.3333282470703,
                                        "y": 553.3333282470703
                                    },
                                    {
                                        "x": 143.3333282470703,
                                        "y": 560.6666564941406
                                    },
                                    {
                                        "x": 143.3333282470703,
                                        "y": 568.0
                                    },
                                    {
                                        "x": 143.3333282470703,
                                        "y": 577.3333282470703
                                    },
                                    {
                                        "x": 142.0,
                                        "y": 586.3333282470703
                                    },
                                    {
                                        "x": 140.0,
                                        "y": 594.6666564941406
                                    },
                                    {
                                        "x": 137.66665649414062,
                                        "y": 602.0
                                    },
                                    {
                                        "x": 136.0,
                                        "y": 609.0
                                    },
                                    {
                                        "x": 134.66665649414062,
                                        "y": 615.3333282470703
                                    },
                                    {
                                        "x": 133.0,
                                        "y": 621.0
                                    },
                                    {
                                        "x": 131.3333282470703,
                                        "y": 626.0
                                    },
                                    {
                                        "x": 129.66665649414062,
                                        "y": 631.3333282470703
                                    },
                                    {
                                        "x": 128.3333282470703,
                                        "y": 635.6666564941406
                                    },
                                    {
                                        "x": 127.33332824707033,
                                        "y": 639.3333282470703
                                    },
                                    {
                                        "x": 127.0,
                                        "y": 642.0
                                    },
                                    {
                                        "x": 126.33332824707033,
                                        "y": 644.0
                                    },
                                    {
                                        "x": 125.66665649414062,
                                        "y": 645.0
                                    },
                                    {
                                        "x": 125.33332824707033,
                                        "y": 645.3333282470703
                                    },
                                    {
                                        "x": 125.33332824707033,
                                        "y": 644.6666564941406
                                    },
                                    {
                                        "x": 124.0,
                                        "y": 642.6666564941406
                                    }
                                ]
                            },
                            {   
                                "color": "#FF4D96FF",
                                "erase": false,
                                "width": 8.0,
                                "points": [
                                    {
                                        "x": 141.0,
                                        "y": 593.0
                                    },
                                    {
                                        "x": 150.66665649414062,
                                        "y": 593.0
                                    },
                                    {
                                        "x": 157.0,
                                        "y": 593.0
                                    },
                                    {
                                        "x": 163.3333282470703,
                                        "y": 593.0
                                    },
                                    {
                                        "x": 169.0,
                                        "y": 593.6666564941406
                                    },
                                    {
                                        "x": 173.3333282470703,
                                        "y": 594.3333282470703
                                    },
                                    {
                                        "x": 176.0,
                                        "y": 594.6666564941406
                                    },
                                    {
                                        "x": 176.66665649414062,
                                        "y": 594.6666564941406
                                    },
                                    {
                                        "x": 178.3333282470703,
                                        "y": 593.6666564941406
                                    }
                                ]
                            },
                            {
                                "color": "#FF4D96FF",
                                "erase": false,
                                "width": 8.0,
                                "points": [
                                    {
                                        "x": 192.3333282470703,
                                        "y": 546.3333282470703
                                    },
                                    {
                                        "x": 184.0,
                                        "y": 554.3333282470703
                                    },
                                    {
                                        "x": 182.66665649414065,
                                        "y": 559.0
                                    },
                                    {
                                        "x": 181.3333282470703,
                                        "y": 564.0
                                    },
                                    {
                                        "x": 180.3333282470703,
                                        "y": 569.6666564941406
                                    },
                                    {
                                        "x": 179.0,
                                        "y": 575.3333282470703
                                    },
                                    {
                                        "x": 178.0,
                                        "y": 580.3333282470703
                                    },
                                    {
                                        "x": 177.3333282470703,
                                        "y": 585.3333282470703
                                    },
                                    {
                                        "x": 176.66665649414062,
                                        "y": 589.6666564941406
                                    },
                                    {
                                        "x": 176.0,
                                        "y": 594.3333282470703
                                    },
                                    {
                                        "x": 176.0,
                                        "y": 599.3333282470703
                                    },
                                    {
                                        "x": 176.0,
                                        "y": 604.3333282470703
                                    },
                                    {
                                        "x": 176.0,
                                        "y": 610.0
                                    },
                                    {
                                        "x": 176.0,
                                        "y": 616.3333282470703
                                    },
                                    {
                                        "x": 176.0,
                                        "y": 622.3333282470703
                                    },
                                    {
                                        "x": 176.0,
                                        "y": 628.0
                                    },
                                    {
                                        "x": 177.0,
                                        "y": 633.0
                                    },
                                    {
                                        "x": 178.66665649414062,
                                        "y": 637.0
                                    },
                                    {
                                        "x": 180.0,
                                        "y": 639.3333282470703
                                    },
                                    {
                                        "x": 181.0,
                                        "y": 640.3333282470703
                                    },
                                    {
                                        "x": 181.3333282470703,
                                        "y": 641.6666564941406
                                    },
                                    {
                                        "x": 181.66665649414065,
                                        "y": 642.3333282470703
                                    },
                                    {
                                        "x": 182.0,
                                        "y": 642.3333282470703
                                    },
                                    {
                                        "x": 183.66665649414065,
                                        "y": 644.0
                                    }
                                ]
                            },
                            {
                                "color": "#FF4D96FF",
                                "erase": false,
                                "width": 8.0,
                                "points": [
                                    {
                                        "x": 209.0,
                                        "y": 551.3333282470703
                                    },
                                    {
                                        "x": 205.66665649414065,
                                        "y": 554.0
                                    },
                                    {
                                        "x": 205.66665649414065,
                                        "y": 560.0
                                    },
                                    {
                                        "x": 206.3333282470703,
                                        "y": 568.3333282470703
                                    },
                                    {
                                        "x": 209.0,
                                        "y": 577.3333282470703
                                    },
                                    {
                                        "x": 211.66665649414065,
                                        "y": 585.3333282470703
                                    },
                                    {
                                        "x": 214.0,
                                        "y": 591.0
                                    },
                                    {
                                        "x": 216.0,
                                        "y": 593.6666564941406
                                    },
                                    {
                                        "x": 216.66665649414065,
                                        "y": 594.0
                                    },
                                    {
                                        "x": 218.0,
                                        "y": 594.0
                                    },
                                    {
                                        "x": 220.0,
                                        "y": 592.3333282470703
                                    }
                                ]
                            },
                            {
                                "color": "#FF4D96FF",
                                "erase": false,
                                "width": 8.0,
                                "points": [
                                    {
                                        "x": 246.66665649414065,
                                        "y": 550.6666564941406
                                    },
                                    {
                                        "x": 239.66665649414065,
                                        "y": 561.0
                                    },
                                    {
                                        "x": 237.3333282470703,
                                        "y": 565.6666564941406
                                    },
                                    {
                                        "x": 233.0,
                                        "y": 571.6666564941406
                                    },
                                    {
                                        "x": 227.66665649414065,
                                        "y": 577.3333282470703
                                    },
                                    {
                                        "x": 223.0,
                                        "y": 581.6666564941406
                                    },
                                    {
                                        "x": 220.0,
                                        "y": 585.3333282470703
                                    },
                                    {
                                        "x": 218.0,
                                        "y": 588.0
                                    },
                                    {
                                        "x": 217.3333282470703,
                                        "y": 590.0
                                    },
                                    {
                                        "x": 217.3333282470703,
                                        "y": 590.6666564941406
                                    },
                                    {
                                        "x": 217.3333282470703,
                                        "y": 591.3333282470703
                                    },
                                    {
                                        "x": 217.3333282470703,
                                        "y": 592.3333282470703
                                    },
                                    {
                                        "x": 217.3333282470703,
                                        "y": 593.3333282470703
                                    },
                                    {
                                        "x": 217.3333282470703,
                                        "y": 593.6666564941406
                                    },
                                    {
                                        "x": 218.0,
                                        "y": 595.6666564941406
                                    }
                                ]
                            },
                            {
                                "color": "#FF4D96FF",
                                "erase": false,
                                "width": 8.0,
                                "points": [
                                    {
                                        "x": 221.66665649414065,
                                        "y": 591.6666564941406
                                    },
                                    {
                                        "x": 221.3333282470703,
                                        "y": 596.6666564941406
                                    },
                                    {
                                        "x": 221.3333282470703,
                                        "y": 602.0
                                    },
                                    {
                                        "x": 221.3333282470703,
                                        "y": 608.6666564941406
                                    },
                                    {
                                        "x": 221.3333282470703,
                                        "y": 615.6666564941406
                                    },
                                    {
                                        "x": 221.3333282470703,
                                        "y": 622.0
                                    },
                                    {
                                        "x": 221.3333282470703,
                                        "y": 627.6666564941406
                                    },
                                    {
                                        "x": 221.0,
                                        "y": 632.6666564941406
                                    },
                                    {
                                        "x": 221.0,
                                        "y": 637.0
                                    },
                                    {
                                        "x": 221.0,
                                        "y": 640.6666564941406
                                    },
                                    {
                                        "x": 220.66665649414065,
                                        "y": 644.0
                                    },
                                    {
                                        "x": 220.66665649414065,
                                        "y": 646.0
                                    },
                                    {
                                        "x": 220.66665649414065,
                                        "y": 646.3333282470703
                                    },
                                    {
                                        "x": 221.0,
                                        "y": 646.3333282470703
                                    }
                                ]
                            },
                            {
                                "color": "#FF4D96FF",
                                "erase": false,
                                "width": 8.0,
                                "points": [
                                    {
                                        "x": 258.3333282470703,
                                        "y": 551.3333282470703
                                    },
                                    {
                                        "x": 258.3333282470703,
                                        "y": 557.0
                                    },
                                    {
                                        "x": 258.3333282470703,
                                        "y": 562.3333282470703
                                    },
                                    {
                                        "x": 257.6666564941406,
                                        "y": 567.3333282470703
                                    },
                                    {
                                        "x": 256.6666564941406,
                                        "y": 572.0
                                    },
                                    {
                                        "x": 255.3333282470703,
                                        "y": 576.6666564941406
                                    },
                                    {
                                        "x": 254.3333282470703,
                                        "y": 581.0
                                    },
                                    {
                                        "x": 253.66665649414065,
                                        "y": 585.0
                                    },
                                    {
                                        "x": 253.0,
                                        "y": 588.3333282470703
                                    },
                                    {
                                        "x": 252.66665649414065,
                                        "y": 591.6666564941406
                                    },
                                    {
                                        "x": 252.66665649414065,
                                        "y": 594.3333282470703
                                    },
                                    {
                                        "x": 252.66665649414065,
                                        "y": 597.3333282470703
                                    },
                                    {
                                        "x": 252.66665649414065,
                                        "y": 600.6666564941406
                                    },
                                    {
                                        "x": 252.66665649414065,
                                        "y": 604.3333282470703
                                    },
                                    {
                                        "x": 252.66665649414065,
                                        "y": 608.3333282470703
                                    },
                                    {
                                        "x": 252.66665649414065,
                                        "y": 612.3333282470703
                                    },
                                    {
                                        "x": 252.66665649414065,
                                        "y": 616.3333282470703
                                    },
                                    {
                                        "x": 252.66665649414065,
                                        "y": 620.6666564941406
                                    },
                                    {
                                        "x": 253.3333282470703,
                                        "y": 624.3333282470703
                                    },
                                    {
                                        "x": 254.3333282470703,
                                        "y": 628.0
                                    },
                                    {
                                        "x": 255.3333282470703,
                                        "y": 631.6666564941406
                                    },
                                    {
                                        "x": 256.0,
                                        "y": 634.6666564941406
                                    },
                                    {
                                        "x": 257.3333282470703,
                                        "y": 637.6666564941406
                                    },
                                    {
                                        "x": 258.6666564941406,
                                        "y": 639.6666564941406
                                    },
                                    {
                                        "x": 261.0,
                                        "y": 641.3333282470703
                                    },
                                    {
                                        "x": 263.6666564941406,
                                        "y": 642.3333282470703
                                    },
                                    {
                                        "x": 266.3333282470703,
                                        "y": 643.0
                                    },
                                    {
                                        "x": 269.6666564941406,
                                        "y": 643.6666564941406
                                    },
                                    {
                                        "x": 273.0,
                                        "y": 644.3333282470703
                                    },
                                    {
                                        "x": 276.3333282470703,
                                        "y": 644.6666564941406
                                    },
                                    {
                                        "x": 280.0,
                                        "y": 645.0
                                    },
                                    {
                                        "x": 283.0,
                                        "y": 645.0
                                    },
                                    {
                                        "x": 286.3333282470703,
                                        "y": 645.0
                                    },
                                    {
                                        "x": 289.6666564941406,
                                        "y": 645.0
                                    },
                                    {
                                        "x": 293.0,
                                        "y": 645.0
                                    },
                                    {
                                        "x": 296.6666564941406,
                                        "y": 643.0
                                    },
                                    {
                                        "x": 299.6666564941406,
                                        "y": 640.0
                                    },
                                    {
                                        "x": 302.3333282470703,
                                        "y": 637.3333282470703
                                    },
                                    {
                                        "x": 304.3333282470703,
                                        "y": 634.0
                                    },
                                    {
                                        "x": 305.3333282470703,
                                        "y": 630.6666564941406
                                    },
                                    {
                                        "x": 306.3333282470703,
                                        "y": 626.3333282470703
                                    },
                                    {
                                        "x": 307.0,
                                        "y": 622.6666564941406
                                    },
                                    {
                                        "x": 307.6666564941406,
                                        "y": 618.6666564941406
                                    },
                                    {
                                        "x": 308.3333282470703,
                                        "y": 615.0
                                    },
                                    {
                                        "x": 308.6666564941406,
                                        "y": 610.6666564941406
                                    },
                                    {
                                        "x": 308.6666564941406,
                                        "y": 606.3333282470703
                                    },
                                    {
                                        "x": 308.6666564941406,
                                        "y": 601.6666564941406
                                    },
                                    {
                                        "x": 308.6666564941406,
                                        "y": 597.0
                                    },
                                    {
                                        "x": 308.6666564941406,
                                        "y": 592.3333282470703
                                    },
                                    {
                                        "x": 308.6666564941406,
                                        "y": 587.3333282470703
                                    },
                                    {
                                        "x": 308.6666564941406,
                                        "y": 582.3333282470703
                                    },
                                    {
                                        "x": 308.3333282470703,
                                        "y": 577.3333282470703
                                    },
                                    {
                                        "x": 308.0,
                                        "y": 572.6666564941406
                                    },
                                    {
                                        "x": 308.0,
                                        "y": 568.6666564941406
                                    },
                                    {
                                        "x": 308.0,
                                        "y": 564.6666564941406
                                    },
                                    {
                                        "x": 308.0,
                                        "y": 561.6666564941406
                                    },
                                    {
                                        "x": 308.0,
                                        "y": 558.6666564941406
                                    },
                                    {
                                        "x": 308.0,
                                        "y": 556.0
                                    },
                                    {
                                        "x": 308.0,
                                        "y": 554.0
                                    },
                                    {
                                        "x": 308.0,
                                        "y": 552.0
                                    },
                                    {
                                        "x": 308.0,
                                        "y": 550.6666564941406
                                    },
                                    {
                                        "x": 308.0,
                                        "y": 550.3333282470703
                                    },
                                    {
                                        "x": 308.6666564941406,
                                        "y": 550.3333282470703
                                    }
                                ]
                            },
                            {
                                "color": "#FF4D96FF",
                                "erase": false,
                                "width": 8.0,
                                "points": [
                                    {
                                        "x": 111.66665649414062,
                                        "y": 653.6666564941406
                                    },
                                    {
                                        "x": 114.33332824707033,
                                        "y": 646.6666564941406
                                    },
                                    {
                                        "x": 118.66665649414062,
                                        "y": 642.3333282470703
                                    },
                                    {
                                        "x": 120.66665649414062,
                                        "y": 640.6666564941406
                                    },
                                    {
                                        "x": 123.33332824707033,
                                        "y": 639.6666564941406
                                    },
                                    {
                                        "x": 128.66665649414062,
                                        "y": 639.3333282470703
                                    },
                                    {
                                        "x": 134.66665649414062,
                                        "y": 639.3333282470703
                                    },
                                    {
                                        "x": 140.0,
                                        "y": 641.3333282470703
                                    },
                                    {
                                        "x": 144.66665649414062,
                                        "y": 645.3333282470703
                                    },
                                    {
                                        "x": 149.3333282470703,
                                        "y": 648.0
                                    },
                                    {
                                        "x": 153.66665649414062,
                                        "y": 649.6666564941406
                                    },
                                    {
                                        "x": 158.0,
                                        "y": 650.3333282470703
                                    },
                                    {
                                        "x": 162.0,
                                        "y": 650.3333282470703
                                    },
                                    {
                                        "x": 166.0,
                                        "y": 650.3333282470703
                                    },
                                    {
                                        "x": 169.3333282470703,
                                        "y": 648.3333282470703
                                    },
                                    {
                                        "x": 173.0,
                                        "y": 645.3333282470703
                                    },
                                    {
                                        "x": 177.0,
                                        "y": 643.0
                                    },
                                    {
                                        "x": 181.66665649414065,
                                        "y": 641.6666564941406
                                    },
                                    {
                                        "x": 186.66665649414065,
                                        "y": 641.6666564941406
                                    },
                                    {
                                        "x": 191.66665649414065,
                                        "y": 641.6666564941406
                                    },
                                    {
                                        "x": 196.3333282470703,
                                        "y": 644.6666564941406
                                    },
                                    {
                                        "x": 200.66665649414065,
                                        "y": 648.3333282470703
                                    },
                                    {
                                        "x": 205.3333282470703,
                                        "y": 651.0
                                    },
                                    {
                                        "x": 209.66665649414065,
                                        "y": 652.0
                                    },
                                    {
                                        "x": 213.66665649414065,
                                        "y": 652.3333282470703
                                    },
                                    {
                                        "x": 217.66665649414065,
                                        "y": 652.3333282470703
                                    },
                                    {
                                        "x": 221.0,
                                        "y": 650.0
                                    },
                                    {
                                        "x": 224.3333282470703,
                                        "y": 646.6666564941406
                                    },
                                    {
                                        "x": 227.3333282470703,
                                        "y": 644.3333282470703
                                    },
                                    {
                                        "x": 230.0,
                                        "y": 643.3333282470703
                                    },
                                    {
                                        "x": 233.0,
                                        "y": 643.0
                                    },
                                    {
                                        "x": 236.3333282470703,
                                        "y": 643.0
                                    },
                                    {
                                        "x": 240.0,
                                        "y": 643.6666564941406
                                    },
                                    {
                                        "x": 243.66665649414065,
                                        "y": 646.0
                                    },
                                    {
                                        "x": 247.66665649414065,
                                        "y": 647.3333282470703
                                    },
                                    {
                                        "x": 251.3333282470703,
                                        "y": 648.3333282470703
                                    },
                                    {
                                        "x": 255.3333282470703,
                                        "y": 648.6666564941406
                                    },
                                    {
                                        "x": 259.3333282470703,
                                        "y": 648.6666564941406
                                    },
                                    {
                                        "x": 263.3333282470703,
                                        "y": 648.6666564941406
                                    },
                                    {
                                        "x": 266.3333282470703,
                                        "y": 647.6666564941406
                                    },
                                    {
                                        "x": 269.6666564941406,
                                        "y": 646.3333282470703
                                    },
                                    {
                                        "x": 272.6666564941406,
                                        "y": 645.0
                                    },
                                    {
                                        "x": 275.3333282470703,
                                        "y": 644.6666564941406
                                    },
                                    {
                                        "x": 278.6666564941406,
                                        "y": 644.6666564941406
                                    },
                                    {
                                        "x": 281.6666564941406,
                                        "y": 644.6666564941406
                                    },
                                    {
                                        "x": 285.0,
                                        "y": 645.6666564941406
                                    },
                                    {
                                        "x": 288.6666564941406,
                                        "y": 647.0
                                    },
                                    {
                                        "x": 291.6666564941406,
                                        "y": 647.3333282470703
                                    },
                                    {
                                        "x": 295.3333282470703,
                                        "y": 647.3333282470703
                                    },
                                    {
                                        "x": 298.3333282470703,
                                        "y": 647.3333282470703
                                    },
                                    {
                                        "x": 301.6666564941406,
                                        "y": 646.6666564941406
                                    },
                                    {
                                        "x": 304.3333282470703,
                                        "y": 645.3333282470703
                                    },
                                    {
                                        "x": 307.0,
                                        "y": 644.6666564941406
                                    },
                                    {
                                        "x": 310.6666564941406,
                                        "y": 644.6666564941406
                                    },
                                    {
                                        "x": 315.0,
                                        "y": 644.6666564941406
                                    },
                                    {
                                        "x": 320.0,
                                        "y": 645.0
                                    },
                                    {
                                        "x": 324.6666564941406,
                                        "y": 645.3333282470703
                                    },
                                    {
                                        "x": 328.3333282470703,
                                        "y": 645.3333282470703
                                    },
                                    {
                                        "x": 329.3333282470703,
                                        "y": 645.3333282470703
                                    },
                                    {
                                        "x": 331.3333282470703,
                                        "y": 643.3333282470703
                                    }
                                ]
                            },
                            {
                                "color": "#FF4D96FF",
                                "erase": false,
                                "width": 8.0,
                                "points": [
                                    {
                                        "x": 343.3333282470703,
                                        "y": 616.3333282470703
                                    },
                                    {
                                        "x": 339.6666564941406,
                                        "y": 621.3333282470703
                                    },
                                    {
                                        "x": 338.3333282470703,
                                        "y": 628.6666564941406
                                    },
                                    {
                                        "x": 336.0,
                                        "y": 633.3333282470703
                                    },
                                    {
                                        "x": 334.3333282470703,
                                        "y": 638.3333282470703
                                    },
                                    {
                                        "x": 330.3333282470703,
                                        "y": 647.0
                                    },
                                    {
                                        "x": 327.3333282470703,
                                        "y": 653.3333282470703
                                    },
                                    {
                                        "x": 325.0,
                                        "y": 656.6666564941406
                                    },
                                    {
                                        "x": 324.6666564941406,
                                        "y": 657.3333282470703
                                    },
                                    {
                                        "x": 327.3333282470703,
                                        "y": 655.3333282470703
                                    },
                                    {
                                        "x": 329.0,
                                        "y": 653.6666564941406
                                    }
                                ]
                            },
                            {
                                "color": "#FF4D96FF",
                                "erase": false,
                                "width": 8.0,
                                "points": [
                                    {
                                        "x": 357.0,
                                        "y": 626.0
                                    },
                                    {
                                        "x": 356.3333282470703,
                                        "y": 631.6666564941406
                                    },
                                    {
                                        "x": 355.6666564941406,
                                        "y": 638.0
                                    },
                                    {
                                        "x": 351.3333282470703,
                                        "y": 646.0
                                    },
                                    {
                                        "x": 347.0,
                                        "y": 653.3333282470703
                                    },
                                    {
                                        "x": 343.6666564941406,
                                        "y": 659.3333282470703
                                    },
                                    {
                                        "x": 341.6666564941406,
                                        "y": 662.6666564941406
                                    },
                                    {
                                        "x": 341.6666564941406,
                                        "y": 663.3333282470703
                                    },
                                    {
                                        "x": 343.6666564941406,
                                        "y": 664.0
                                    }
                                ]
                            }
                        ]
                    },
                    "opacity": 1.0,
                    "rotation": 0.0,
                    "positionFallback": {
                        "xPx": 107.16665649414062,
                        "yPx": 5197.166661580404,
                        "docWidth": null
                    }
                }
            ]
        },
        "summary": "애한제 축제 후기 - 정말 멋진 공연이었어요!",
        "author": "affection_jh",
        "authorProfileImageUrl": "https://dy6yjbdvo0pg9.cloudfront.net/users/affection_jh/1b9c9224-dd63-410c-8541-093682657af7.jpg",
        "accessLevel": "PUBLIC",
        "sharedGroupIds": null,
        "viewCount": 266,
        "likeCount": 0,
        "isLiked": false,
        "createdAt": "2025-11-02T05:07:52.683007",
        "updatedAt": "2025-11-05T13:32:53.13836"
    }
  }
};

interface PageProps {
  params: Promise<{
    username: string;
    postId: string; // 실제로는 "title-slug-123" 형태
  }>;
}

export default async function PostPage({ params }: PageProps) {
  const { username, postId: slugWithId } = await params;

  // URL 파라미터 검증
  if (!username || !slugWithId) {
    notFound();
  }

  // username 검증
  const usernameRegex = /^[a-zA-Z0-9_-]+$/;
  if (!usernameRegex.test(username)) {
    notFound();
  }

  // slug-postId 형식 검증 및 postId 추출
  const postIdMatch = slugWithId.match(/-(\d+)$/);
  if (!postIdMatch) {
    notFound();
  }
  
  const postId = postIdMatch[1];

  // 데이터 가져오기 (실제 API 또는 Mock)
  let post: Post | null = null;

  // 개발 환경에서는 Mock 데이터 사용
  if (process.env.NODE_ENV === 'development') {
    post = MOCK_DATA[username]?.[postId] || null;
  } else {
    // 프로덕션에서는 실제 API 호출
    post = await getPost(username, postId);
  }

  if (!post) {
    notFound();
  }

  // 게시글 작성자와 URL의 username이 일치하는지 확인 (보안)
  if (post.author !== username) {
    notFound();
  }

  return <PostViewer post={post} />;
}

// 메타데이터 생성
export async function generateMetadata({ params }: PageProps) {
  const { username, postId } = await params;
  
  let post: Post | null = null;
  
  if (process.env.NODE_ENV === 'development') {
    post = MOCK_DATA[username]?.[postId] || null;
  } else {
    post = await getPost(username, postId);
  }

  if (!post) {
    return {
      title: '게시글을 찾을 수 없습니다',
    };
  }

  return {
    title: `${post.title} - ${post.author}`,
    description: post.summary || post.title,
    openGraph: {
      title: post.title,
      description: post.summary || post.title,
      images: [post.thumbnailImageUrl],
    },
  };
}

